<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<title>Távolságlépcső</title>
<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #fff;
    font-family: "Times New Roman", serif;
    overflow: hidden;
  }
  #stairs {
    position: relative;
    overflow: visible;
  }
  .step {
    position: absolute;
    border: 2px solid #fff;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
  }
  .grey { color: rgb(179,179,179); }
  #edu {
    position: absolute;
    transition: left 0.3s, bottom 0.3s;
    pointer-events: none;
  }
</style>
</head>
<body>
<div id="stairs"></div>
<script>
const labels = ['mm','cm','dm','m','dam','hm','km'];
const greyUnits = ['dm','dam'];
const container = document.getElementById('stairs');
let stepCount = labels.length;
let stepSize = 0;
let offset = 0;
const edu = document.createElement('img');
edu.id = 'edu';
edu.src = 'Edu_átlátszó_háttér.svg';
edu.alt = 'Edu';
container.appendChild(edu);
let index = labels.indexOf('m');
function build(){
  container.innerHTML='';
  container.appendChild(edu);
  const widthLimit = window.innerWidth*0.9/stepCount;
  const heightLimit = window.innerHeight*0.9/(stepCount+3);
  stepSize = Math.min(widthLimit, heightLimit);
  const size = stepSize*stepCount;
  offset = stepSize;
  container.style.width = size+'px';
  container.style.height = stepSize*(stepCount+3)+'px';
  container.style.transform = `translateY(-${stepSize*0.5}px)`;
  for(let i=0;i<stepCount;i++){
    const step=document.createElement('div');
    step.className='step';
    if(greyUnits.includes(labels[i])) step.classList.add('grey');
    step.style.width=stepSize+'px';
    step.style.height=stepSize+'px';
    step.style.left=i*stepSize+'px';
    step.style.bottom=offset+i*stepSize+'px';
    if(labels[i]) step.textContent=labels[i];
    container.appendChild(step);
  }
  drawArrow(offset+stepCount*stepSize+stepSize*0.2,'right','osztunk 10-zel');
  drawArrow(offset-stepSize*1.2,'left','szorzunk 10-zel');
  edu.style.width=stepSize+'px';
  edu.style.height=stepSize+'px';
  positionEdu();
}
function drawArrow(y,dir,text){
  const arrowColor='#00bfff';
  const width=stepSize*(stepCount-1);
  const headLen=stepSize*0.5;
  const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');
  svg.setAttribute('width',width+headLen);
  svg.setAttribute('height',stepSize*0.5);
  svg.style.position='absolute';
  svg.style.left=stepSize/2+'px';
  svg.style.bottom=y+'px';
  const line=document.createElementNS('http://www.w3.org/2000/svg','line');
  line.setAttribute('y1',stepSize*0.25);
  line.setAttribute('y2',stepSize*0.25);
  line.setAttribute('stroke',arrowColor);
  line.setAttribute('stroke-width',stepSize*0.1);
  line.setAttribute('stroke-linecap','round');
  if(dir==='right'){line.setAttribute('x1',0);line.setAttribute('x2',width-headLen);}else{line.setAttribute('x1',headLen);line.setAttribute('x2',width);} 
  svg.appendChild(line);
  const head=document.createElementNS('http://www.w3.org/2000/svg','polygon');
  if(dir==='right'){
    head.setAttribute('points',`${width-headLen},${stepSize*0.5} ${width},${stepSize*0.25} ${width-headLen},0`);
  }else{
    head.setAttribute('points',`${headLen},${stepSize*0.5} 0,${stepSize*0.25} ${headLen},0`);
  }
  head.setAttribute('fill',arrowColor);
  svg.appendChild(head);
  container.appendChild(svg);
  const label=document.createElement('div');
  label.textContent=text;
  label.style.position='absolute';
  label.style.left='50%';
  label.style.bottom=y+stepSize*0.5+'px';
  label.style.transform='translateX(-50%)';
  label.style.color=arrowColor;
  label.style.fontWeight='bold';
  label.style.textShadow='0 0 4px #000';
  label.style.fontSize=Math.max(stepSize*0.3,18)+'px';
  container.appendChild(label);
}
function positionEdu(){
  edu.style.left=index*stepSize+'px';
  edu.style.bottom=offset+(index+1)*stepSize+'px';
}
window.addEventListener('load',build);
window.addEventListener('resize',build);
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowRight' && index<stepCount-1){index++;positionEdu();}
  else if(e.key==='ArrowLeft' && index>0){index--;positionEdu();}
});
</script>
</body>
</html>